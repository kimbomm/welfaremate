# 복지메이트 (WelfareMate) 서비스 기획서

> **"복잡한 복지 정보를 한눈에, 개인정보 걱정 없는 AI 맞춤형 비서"**

## 1. 서비스 개요

### 핵심 컨셉
실시간 API 호출 대신 매일 수집된 정적 데이터(Snapshot)를 활용하여 빠른 속도로 복지 정보를 큐레이션하는 모바일 특화 웹앱.

### 철학
| 원칙 | 설명 |
|------|------|
| **Privacy First** | 모든 데이터는 브라우저(IndexedDB)에만 저장, 서버 DB 없음 |
| **Simplicity** | 복잡한 용어를 AI가 '사람의 언어'로 번역 |
| **Speed** | 사전 수집된 데이터를 통해 1초 내 응답하는 환경 구축 |

### 배포 정보
| 항목 | 값 |
|------|-----|
| 서비스 URL | Vercel 배포 |
| 저장소 | https://github.com/kimbomm/welfaremate |
| 자동 배포 | main 브랜치 푸시 시 자동 배포 |

---

## 2. 타겟 사용자

- 자신의 조건(나이, 소득 등)에 맞는 복지 혜택을 찾고 싶지만 공고문이 너무 어려워 포기한 **청년 및 예비 부모**
- 개인정보 유출에 민감하여 회원가입이나 데이터 서버 전송을 꺼리는 사용자
- 타겟 지역: **전국** (서울/수도권 우선)

---

## 3. 핵심 기능

### MVP Phase 1 ✅ 완료

| 기능 | 설명 | 상태 |
|------|------|------|
| **온보딩** | 나이, 지역, 직업, 소득, 결혼여부, 주거형태 입력 → IndexedDB 저장 | ✅ |
| **홈 큐레이션** | 프로필 기반 맞춤 추천 3개 카드 노출 (마감된 항목 제외) | ✅ |
| **상세페이지** | 자격요건 + 서류 + 일정 + 원본 링크, 마감 시 "마감된 내역 보러가기" 버튼 | ✅ |
| **검색** | 무한 스크롤 + 필터 드로어(지역·카테고리·혜택 유형·신청 기한·가구수·소득·대상 특성) + 정렬(추천/마감/일반) | ✅ |
| **북마크** | 관심 혜택 저장/삭제 | ✅ |

### MVP Phase 2 🔄 진행 중

| 기능 | 설명 | 상태 |
|------|------|------|
| **AI 상담** | 키워드 기반 복지 검색 챗봇 | ✅ |
| **체크리스트** | 필요 서류/절차 단계별 체크 | ❌ |

### MVP Phase 3 ❌ 예정

| 기능 | 설명 | 상태 |
|------|------|------|
| **마감 알림** | PWA Push (D-7, D-1) | ❌ |
| **비교 기능** | 유사 복지 조건 비교표 | ❌ |
| **공유 기능** | 카카오톡/링크 공유 | ❌ |

---

## 4. 추천 알고리즘

### 점수 기반 추천 시스템

사용자 프로필을 기반으로 각 복지 항목에 점수를 부여하고, 상위 3개를 홈에 노출.

### 우선순위 (상세 구현: `apps/web/src/lib/recommend.ts`)

| 순위 | 기준 | 배점 |
|------|------|------|
| 1 | **자녀/청년 태그** (프로필에 맞는 태그) | 120점 |
| 2 | **결혼 여부 + 출산/청년 태그** | 100점 |
| 3 | **소득 수준** | 50~80점 |
| 4 | **나이** | 70점(충족) / -60점(미충족) / 30점(조건 없음) |
| 5 | **주거** (월세/전세/무주택 등) | 30~50점 |
| - | 지역 매칭 (시도/시군구) | 25~40점 |
| - | 마감 임박 (D-30 이내) | 10점 |

- 추천 뱃지: 점수 200점 이상 + 지역 일치 시 "추천" 표시.

### 매칭 로직

```
결혼 여부 + 태그:
  - 기혼 + 자녀 있음 → 출산/육아/보육 태그 우선 (120+100)
  - 미혼 → 청년 태그 우선 (120+100)

소득 수준:
  - 저소득 → 중위소득 50% 이상 혜택 80점
  - 중간 → 중위소득 100% 이상 혜택 80점
  - 고소득 → 소득 조건 없는 혜택 50점

나이: 조건 충족 70점, 미충족 -60점, 조건 없음 30점
지역: 시군구 일치 40점, 시도 일치 25점
```

---

## 5. 데이터 전략

### 데이터 현황

| 항목 | 값 |
|------|-----|
| 총 복지 데이터 | **10,891건** |
| 데이터 소스 | 행정안전부 공공서비스(혜택) 정보 API |
| 업데이트 주기 | 매일 03:00 KST (GitHub Actions) |

### Data Snapshot 파이프라인

```
[매일 새벽 3시 - GitHub Actions]
    │
    ├─→ 행안부 API 호출 (전국 데이터)
    │
    ├─→ 변환 (카테고리·지역·일정 등 파싱)
    │     · eligibility.region: 소관기관명 + 복지명(서비스명)에서 시도·시군구 자동 추출
    │
    ├─→ welfare-snapshot.json 저장
    │
    ├─→ GitHub 자동 커밋
    │
    └─→ Vercel 자동 배포
```

- 상세 재가공(AI 요약·자격 해석 등): CI 미포함, IDE에서 에이전트 요청 시 수행. 규칙: `.cursor/rules/welfare-detail-rework.mdc`
- 스냅샷 로드 시: region 비어 있으면 title + source.name에서 동일 규칙으로 보정.

### 비용

| 항목 | 예상 비용 |
|------|----------|
| API 호출 | 무료 (공공데이터) |
| AI 요약 | 상세 재가공 시 선택 사용 (CI 미포함) |
| 호스팅 | Vercel 무료 플랜 |

---

## 6. 상세페이지 전략

### 하이브리드 방식

| 계층 | 내용 | 소스 |
|------|------|------|
| 요약 | 한줄 요약, 핵심 금액 | AI 생성 |
| 자격 요건 | 조건 해석, 충족 여부 자동 체크 | API + 프로필 매칭 |
| 서류/일정 | 필요 서류, 마감일 | API 원본 |
| 신청 | 실제 신청 링크 | 원본 URL (복지로/정부24) |

### 마감된 항목

- 상세페이지: 마감된 경우 기본 CTA를 "마감된 내역 보러가기"로 표시 (회색 버튼).

### 면책 문구

```
ℹ️ 본 정보는 이해를 돕기 위해 요약한 것입니다.
   정확한 내용은 원본 페이지에서 반드시 확인하세요.
```

---

## 7. 검색 기능

### UI/UX

| 요소 | 설명 |
|------|------|
| 검색 전 화면 | 아이콘 + 안내 문구 + 추천 키워드 버튼 |
| 필터 | 우측 슬라이드 드로어. 지역(내 지역/전국), 카테고리·혜택 유형·신청 기한 칩(복수 선택), 가구수·소득·대상 특성 셀렉트박스(전체 옵션 포함) |
| 정렬 | 추천 / 마감 / 일반. 순서: 추천(미마감) > 없음(미마감) > 마감+추천 > 마감 |
| 결과 표시 | 무한 스크롤 (20개씩), 카드에 추천/마감 뱃지 |
| 결과 수 | "검색 결과 N건" 표시, 필터 적용 개수 뱃지 |

### 카테고리

- 주거 / 취업·창업 / 육아·보육 / 교육 / 건강·의료 / 금융·대출 / 문화·여가 / 기타

---

## 8. 챗봇 상담

### 접근 방식

- 홈 화면 우측 하단 **플로팅 버튼**으로 진입
- 네비게이션에서는 제거 (홈/검색/저장만 표시)

### 동작 방식

| 모드 | 설명 | 환경변수 |
|------|------|----------|
| **템플릿 기반** (기본) | 키워드 매칭으로 복지 검색 후 정형화된 응답 | - |
| **AI 기반** (선택) | Gemini API 활용 자연어 응답 | `USE_AI=true` |

### 템플릿 시나리오

| 패턴 | 키워드 예시 | 응답 |
|------|-------------|------|
| 인사 | 안녕, 하이 | 환영 메시지 + 예시 키워드 |
| 도움말 | 도움, 사용법 | 기능 안내 |
| 복지 검색 | 청년, 월세, 출산 등 | 검색 결과 카드 (최대 5개) |
| 결과 없음 | - | 대안 키워드 제안 |

### 응답 형식

```
"출산" 관련 혜택 15건을 찾았어요!

1. [[임산부 외래진료비 경감|welfare_xxx]]
   임신 중 진료비 부담 완화...

2. [[고위험 임산부 의료비 지원|welfare_xxx]]
   입원치료비 지원...

---
※ 정확한 자격 요건은 각 혜택 페이지에서 확인해주세요.
```

### 대화 저장

- IndexedDB에 세션별 대화 기록 저장
- 이전 상담 불러오기/삭제 가능

---

## 9. 관리자 페이지

### 주요 기능 (예정)

| 카테고리 | 기능 |
|----------|------|
| **데이터 관리** | 수집 현황, 수동 트리거, 품질 체크 |
| **큐레이션** | 추천 가중치, 배너/공지, 에디터 픽 |
| **챗봇 설정** | AI 활성화 여부, 응답 템플릿 |
| **분석** | 접속 통계, 인기 검색어 (GA 연동) |
| **수익화** | 광고 슬롯 ON/OFF, 제휴 링크 |

### 운영 방식

```
관리자 설정 변경 → config/*.json 수정 → GitHub 커밋 → 자동 배포
```

---

## 10. 수익 모델

| 모델 | 설명 |
|------|------|
| **네이티브 광고** | 리스트/상세페이지 구글 애드센스 |
| **제휴 마케팅** | 카테고리별 상품 추천 (대출, 보험 등) |

---

## 11. UI/UX 가이드

### 레퍼런스

- **Primary**: 토스 (카드 UI, 인터랙션, 컬러)
- **Secondary**: 뱅크샐러드, 카카오페이

### 디자인 원칙

| 원칙 | 적용 |
|------|------|
| 모바일 최적화 | 최대 너비 720px |
| 카드 기반 | 정보 가독성 향상 |
| 숫자 강조 | 혜택 금액 먼저 노출 |
| 넉넉한 여백 | 답답하지 않은 UI |

### 컬러 시스템

```css
--primary: #3182F6;    /* 메인 블루 */
--success: #00C471;    /* 자격 충족 */
--warning: #FF9500;    /* 마감 임박 */
--danger: #FF3B30;     /* 자격 미달 */
```

---

## 12. 향후 확장

- [ ] 체크리스트 기능 (서류 준비 체크)
- [ ] 복지 캘린더 (마감일 관리)
- [ ] PWA 푸시 알림
- [ ] 커뮤니티 (후기/팁 공유)
- [ ] 챗봇 Quick Reply 버튼
- [ ] AI 모드 활성화 (관리자 설정)
- [ ] 알림톡 연동
- [ ] 앱 출시 (PWA → 네이티브)
